!function(e){function t(t){for(var n,o,s=t[0],r=t[1],a=0,c=[];a<s.length;a++)o=s[a],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&c.push(i[o][0]),i[o]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);for(l&&l(t);c.length;)c.shift()()}var n={},i={2:0};function o(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,o){n=i[e]=[t,o]}));t.push(n[2]=s);var r,a=document.createElement("script");a.charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.src=function(e){return o.p+"dist/bundles/"+e+".scripts."+{0:"56f8452c987405f74135",5:"c25e01315321d98cc403",6:"569d03492e98cc001d62",7:"fc109320bbf7d1affe1c",8:"d77905289bee1c3f8eed",9:"73be1cff221c29ec79ba",10:"73352826df4b345e4f94",11:"be419836af39ba974fa3",12:"1ba975b93d4da3a3e3f1",13:"58698e0a03e24f52503e"}[e]+".min.js"}(e);var l=new Error;r=function(t){a.onerror=a.onload=null,clearTimeout(c);var n=i[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+s+")",l.name="ChunkLoadError",l.type=o,l.request=s,n[1](l)}i[e]=void 0}};var c=setTimeout((function(){r({type:"timeout",target:a})}),12e4);a.onerror=a.onload=r,document.head.appendChild(a)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/static/themes/actu_v2/",o.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],r=s.push.bind(s);s.push=t,s=s.slice();for(var a=0;a<s.length;a++)t(s[a]);var l=r;o(o.s=37)}({11:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,"a",(function(){return s}));var s=o((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));s.s={supportsPassive:!1,isTouch:"ontouchstart"in window||navigator.maxTouchPoints,isMobile:navigator.userAgent.match(/Tablet|iPad|Mobile|Windows Phone|Lumia|Android|webOS|iPhone|iPod|Blackberry|PlayBook|BB10|Opera Mini|\bCrMo\/|Opera Mobi/i),isIE:!!navigator.userAgent.match(/Trident/g)||!!navigator.userAgent.match(/MSIE/g),breakpoints:{small:640,medium:770,large:1020}}},20:function(e,t){var n=e.exports=function(){};n.isFormValid=function(e){var t=this,n=[].slice.call(e.querySelectorAll("[required]")),i="";return n.forEach((function(e){var n=e.value,o=e.getAttribute("type"),s=e.getAttribute("minlength");"checkbox"===o?e.checked?e.classList.remove("is-required"):(i+=e.getAttribute("title")+"<br />",e.classList.add("is-required")):""===n?(i+='"'+e.getAttribute("title")+'" est obligatoire<br />',e.classList.add("is-required")):"email"!==e.getAttribute("type")||t.isEmailValid(n)?"password"===e.getAttribute("type")&&n.length<s?(i+="Le mot de passse doit contenir "+s+" caractères minimum<br />",e.classList.add("is-required")):e.classList.remove("is-required"):(i+="L'e-mail est  incorrect<br />",e.classList.add("is-required"))})),i},n.isEmailValid=function(e){return/\S+@\S+\.\S+/.test(e)},n.initLabelInner=function(e){[].slice.call(e).forEach((function(e){var t=e.querySelector("input")||e.querySelector("textarea"),n=e.querySelector("label");""!==t.value&&n.classList.add("ac-form-label__folded"),t.addEventListener("focusout",(function(e){""===t.value?n.classList.remove("ac-form-label__folded"):n.classList.add("ac-form-label__folded")})),t.addEventListener("click",(function(e){n.classList.add("ac-form-label__folded")})),n.addEventListener("click",(function(e){n.classList.add("ac-form-label__folded")})),t.addEventListener("focus",(function(e){n.classList.add("ac-form-label__folded")}))}))},n.initCheckBox=function(e){[].slice.call(e).forEach((function(e){e.addEventListener("change",(function(){e.classList.contains("is-required")&&e.checked&&e.classList.remove("is-required"),e.checked?t.setAttribute("aria-checked",!0):t.setAttribute("aria-checked",!1)}));var t=e.parentNode.querySelector("label");t.addEventListener("keydown",(function(n){32===n.keyCode&&(e.checked?(e.checked=!1,t.setAttribute("aria-checked",!1)):(e.checked=!0,t.setAttribute("aria-checked",!0)),n.preventDefault())}))}))},n.initRadios=function(e){var t=[].slice.call(e);t.forEach((function(e){e.addEventListener("change",(function(e){t.forEach((function(t){var n=t.parentNode.querySelector("label");n===e.target.parentNode.querySelector("label")?n.setAttribute("aria-checked",!0):n.setAttribute("aria-checked",!1)}))})),e.parentNode.querySelector("label").addEventListener("keydown",(function(n){32===n.keyCode&&(t.forEach((function(e){var t=e.parentNode.querySelector("label");t===n.target.parentNode.querySelector("label")?t.setAttribute("aria-checked",!0):t.setAttribute("aria-checked",!1)})),e.checked=!0,n.preventDefault())}))}))}},21:function(e,t){var n=e.exports=function(){};n.shuffle=function(e){var t=e.length;if(0==t)return!1;for(;--t;){var n=Math.random()*(t+1)|0,i=e[t],o=e[n];e[t]=o,e[n]=i}return e},n.setCookie=function(e,t,n){var i="";if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),i="; expires="+o.toUTCString()}document.cookie=e+"="+(t||"")+i+"; path=/"},n.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null}},28:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,"a",(function(){return o}));var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.currentContainer=null,this.currentBtnRegion=null,this.init()}var t,n,o;return t=e,(n=[{key:"init",value:function(){var e=this;[].slice.call(this.el.querySelectorAll("section")).forEach((function(t,n){var i=t.querySelector(".ac-icon--arrow-bottom"),o=t.querySelector(".container");i&&i.addEventListener("click",(function(t){var n=o.querySelector("ul");("flex"!==window.getComputedStyle(n).display||n.classList.contains("js-accordion-all-screen"))&&(t.preventDefault(),o.classList.contains("container--folded")?(e.addCurrentFolded(),o.classList.remove("container--folded"),e.currentContainer=o,e.currentBtnRegion=i,e.addArrowTop(i)):(o.classList.add("container--folded"),e.currentContainer=null,e.currentBtnRegion=null,e.addArrowBottom(i)))}))}))}},{key:"scrollTop",value:function(e){}},{key:"addCurrentFolded",value:function(){this.currentContainer&&(this.currentContainer.classList.add("container--folded"),this.addArrowBottom(this.currentBtnRegion))}},{key:"addArrowTop",value:function(e){e.classList.contains("ac-icon--arrow-bottom")&&(e.classList.remove("ac-icon--arrow-bottom"),e.classList.add("ac-icon--arrow-top"),e.classList.add("sticky"),e.setAttribute("aria-expanded",!0))}},{key:"addArrowBottom",value:function(e){e.classList.contains("ac-icon--arrow-top")&&(e.classList.add("ac-icon--arrow-bottom"),e.classList.remove("ac-icon--arrow-top"),e.classList.remove("sticky"),e.setAttribute("aria-expanded",!1))}}])&&i(t.prototype,n),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},29:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,"a",(function(){return o}));var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.init()}var t,n,o;return t=e,(n=[{key:"addClick",value:function(e){var t=e.querySelector(".ac-btn--mini");this.addListener(t)}},{key:"init",value:function(){var e=this;[].slice.call(this.el.querySelectorAll(".ac-btn--mini")).forEach((function(t){e.addListener(t)}))}},{key:"addListener",value:function(e){e.addEventListener("click",(function(){e.classList.contains("ac-icon--star")?(e.classList.remove("ac-icon--star"),e.classList.add("ac-icon--star-empty"),e.innerHTML=e.getAttribute("data-follow")):(e.classList.add("ac-icon--star"),e.classList.remove("ac-icon--star-empty"),e.innerHTML=e.getAttribute("data-unfollow"))}))}}])&&i(t.prototype,n),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},34:function(e,t,n){"use strict";n.r(t);var i=n(11);function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.s={duration:600,easing:"easeOutExpo",distShow:i.a.s.isMobile?50:80,distHide:10,scrollTopMini:i.a.s.isMobile?170:200},this.progressing=!1,this.scrollTop=0,this.el=t,this.elWrapper=document.getElementById("wrapper-global"),this.elHeader=this.elWrapper.querySelector(".ac-header")}var t,n,s;return t=e,(n=[{key:"update",value:function(e,t){"bottom"===t&&!this.el.classList.contains("is-hidden")&&e-this.scrollTop>this.s.distHide?this.hide():"top"===t&&this.el.classList.contains("is-hidden")&&this.scrollTop-e>this.s.distShow&&e>this.s.scrollTopMini&&!this.progressing&&this.show(),this.scrollTop=e}},{key:"reset",value:function(){this.el.classList.add("is-hidden"),this.el.removeAttribute("style"),this.progressing=!1}},{key:"show",value:function(){this.el.classList.remove("is-hidden")}},{key:"hide",value:function(){this.progressing=!0}}])&&o(t.prototype,n),s&&o(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}(),r=n(28);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.s={duration:400,easing:"easeOutExpo"},this.EVENT={CLOSE:"close"},this.el=t,this.elHeader=t.querySelector(".ac-modal-regions__header"),this.elBtnClose=this.elHeader.querySelector(".ac-btn--close"),this.initBtnClose()}var t,n,i;return t=e,(n=[{key:"emit",value:function(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t||{},bubbles:!1,cancelable:!1}))}},{key:"show",value:function(){this.initHtmlContent(),this.keyDown=this.onKeydown.bind(this),this.el.addEventListener("keydown",this.keyDown),this.el.classList.remove("is-hidden"),document.body.classList.add("no-scrolling"),this.elBtnClose.focus()}},{key:"close",value:function(){this.el.classList.add("no-scrolling"),this.el.classList.add("is-hidden"),document.body.classList.remove("no-scrolling"),this.el.removeEventListener("keydown",this.keyDown)}},{key:"initBtnClose",value:function(){var e=this;this.elBtnClose.addEventListener("click",(function(){e.close()}))}},{key:"initBtnsSeeMore",value:function(){[].slice.call(this.el.querySelectorAll("section")).forEach((function(e,t){var n=e.querySelector(".ac-preview-media-hybride-see");if(n){var i=n.querySelector(".ac-btn"),o=n.querySelector(".js-txt");n.addEventListener("click",(function(){var t=e.querySelectorAll(".ac-preview-media-hybride--more-results");i.classList.contains("ac-icon--more")?(i.classList.remove("ac-icon--more"),i.classList.add("ac-icon--less"),o.innerHTML=o.getAttribute("data-less"),t.forEach((function(e){e.classList.add("ac-preview-media-hybride--show")}))):(i.classList.add("ac-icon--more"),i.classList.remove("ac-icon--less"),o.innerHTML=o.getAttribute("data-more"),t.forEach((function(e){e.classList.remove("ac-preview-media-hybride--show")})))}))}}))}},{key:"initAccordionMenu",value:function(){new r.a(this.el)}},{key:"initHtmlContent",value:function(){var e=this,t=new XMLHttpRequest;t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&(e.el.querySelector(".ac-modal-regions__content").appendChild(t.response.querySelector(".wrap")),e.initBtnsSeeMore(),e.initAccordionMenu())},t.onerror=function(){console.debug("onerror",t)},console.log("iic"),t.open("POST","https://static."+window.location.host+"/themes/actu_v2/dist/modal-region-20220425.min.html",!0),t.responseType="document",t.send()}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.elBtnClose.click()}}])&&a(t.prototype,n),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.s={duration:300,easing:"easeOutQuad"},this.EVENT={CLOSE:"close"},this.elMask=document.getElementById("modal-mask"),this.el=t,this.initClose()}var t,n,o;return t=e,(n=[{key:"emit",value:function(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t||{},bubbles:!1,cancelable:!1}))}},{key:"show",value:function(){window.innerWidth,this.keyDown=this.onKeydown.bind(this),this.el.addEventListener("keydown",this.keyDown),this.el.classList.remove("is-hidden"),this.el.setAttribute("tabIndex",-1),this.el.focus(),i.a.s.breakpoints.medium,this.elMask.classList.remove("is-hidden")}},{key:"close",value:function(){window.innerWidth,this.emit(this.EVENT.CLOSE,this),this.el.removeEventListener("keydown",this.keyDown),i.a.s.breakpoints.medium,this.reset()}},{key:"initClose",value:function(){var e=this;this.elMask.addEventListener("click",(function(){e.close()}))}},{key:"reset",value:function(){this.el.classList.add("is-hidden"),this.elMask.classList.add("is-hidden"),this.elMask.removeAttribute("style"),this.el.removeAttribute("style")}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.close()}}])&&c(t.prototype,n),o&&c(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),d=n(20),h=n.n(d);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function v(){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=m(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(s,e);var t,n,i,o=b(s);function s(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(n=o.call(this,e)).isAnimate=t,n.elBtnConnectHeader=document.querySelector(".ac-header .js-btn-connect"),n.elForm=n.el.querySelector("form"),n.elError=n.el.querySelector(".ac-modal-user__error"),n.elBtnSubmit=n.elForm.querySelector(".ac-btn"),n.allFormLabel=n.elForm.querySelectorAll(".ac-form-label"),n.elBtnConnect=n.el.querySelector(".js-btn-connect"),n.allFormLabel&&setTimeout((function(){h.a.initLabelInner(n.allFormLabel)}),0),n.init(),n.initForm(),n}return t=s,(n=[{key:"show",value:function(){this.isAnimate&&v(w(s.prototype),"show",this).call(this)}},{key:"close",value:function(){this.isAnimate&&v(w(s.prototype),"close",this).call(this)}},{key:"init",value:function(){var e=this;this.elBtnConnect&&this.elBtnConnect.addEventListener("click",(function(){e.elBtnConnectHeader.click()}))}},{key:"initForm",value:function(){var e=this;this.elForm.addEventListener("submit",(function(t){var n=h.a.isFormValid(e.elForm);""!==n?(t.preventDefault(),e.elError.innerHTML=n,e.elError.classList.remove("is-hidden")):(e.elError.classList.add("is-hidden"),e.elBtnSubmit.setAttribute("disabled",!0))}))}}])&&p(t.prototype,n),i&&p(t,i),Object.defineProperty(t,"prototype",{writable:!1}),s}(u);function S(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var L=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.s={duration:600,easing:"easeOutExpo",isHeaderMedia:!1,isHeaderMonActu:!1},this.progressing=!1,this.el=t,this.elWrapper=document.getElementById("wrapper-global"),this.elModalRegions=document.getElementById("modal-regions"),this.elModalConnect=document.getElementById("modal-connect"),this.elWrapperNav=this.elWrapper.querySelector(".wrapper-nav"),this.elNav=this.elWrapper.querySelector(".ac-nav"),this.elReadScrollup=this.elWrapper.querySelector(".ac-read-scrollup"),this.elHeaderMedia=this.el.querySelector(".wrap--media"),this.elHeaderMonActu=this.el.querySelector(".wrap--monactu"),this.elBtnRegion=this.el.querySelector(".js-btn-region"),this.elBtnServices=this.el.querySelector(".js-btn-services"),this.elBtnNews=this.el.querySelector(".js-btn-news"),this.elBtnConnect=this.el.querySelector(".js-btn-connect"),this.elBtnLogged=this.el.querySelector(".js-btn-logged"),this.elBtnSubscribe=this.el.querySelector(".js-btn-paper"),this.readScrollup=null,this.modalRegions=null,this.modalConnect=null,this.s.isHeaderMedia=!!this.elHeaderMedia,this.s.isHeaderMonActu=!!this.elHeaderMonActu,this.s.isAppWebview=window.isAppMobile,this.initNav(),this.initReadscrollup(),this.initClickHeaderActu()}var t,n,o;return t=e,(n=[{key:"update",value:function(e,t){this.fixedHeader(e,t),this.readScrollup&&this.readScrollup.update(e,t),this.elModalConnect&&this.modalConnect&&e<this.el.offsetTop&&!this.elModalConnect.classList.contains("is-hidden")&&(this.modalConnect.close(),this.removeNoScrollingBody())}},{key:"initNav",value:function(){var e=this;this.elBtnRegion&&this.elBtnRegion.addEventListener("click",(function(){null===e.modalRegions&&(e.modalRegions=new l(e.elModalRegions)),e.modalRegions.show()})),this.elBtnConnect&&this.elBtnConnect.addEventListener("click",(function(){null===e.modalConnect&&(e.modalConnect=new k(e.elModalConnect,!0)),e.elModalConnect.classList.contains("is-hidden")?(e.setScrollModalConnect(),e.addNoScrollingBody(),e.elBtnConnect.setAttribute("aria-expanded",!0),e.modalConnect.show()):(e.elBtnConnect.setAttribute("aria-expanded",!1),e.modalConnect.close(),e.removeNoScrollingBody())}))}},{key:"initReadscrollup",value:function(){this.elReadScrollup&&(this.readScrollup=new s(this.elReadScrollup))}},{key:"hideReadscrollup",value:function(e){this.readScrollup&&(e?this.readScrollup.hide():this.readScrollup.reset())}},{key:"fixedHeader",value:function(e,t){var n=this.el.offsetTop,i=this.elWrapperNav?this.elWrapperNav.offsetTop:0,o=this.elWrapperNav?this.elWrapperNav.clientHeight:0,s=this.el.clientHeight+o,r=this.el.classList.contains("ac-header--fixed"),a=n+this.el.clientHeight;this.elNav&&(a+=this.elNav.clientHeight),e>a&&"bottom"===t&&!r?(this.initHeaderFixed(),this.showHeaderFixed()):e<i+s&&"top"===t&&!this.progressing&&r?(this.progressing=!0,this.hideReadscrollup(!0),this.hideHeaderFixed()):e<i&&"top"===t&&r&&(anime.remove(this.el),this.resetHeaderFixed(),this.hideReadscrollup(!1));var l=this.el.querySelector(".ac-tooltip");r&&l?l.classList.add("is-hidden"):!r&&l&&l.classList.remove("is-hidden")}},{key:"initHeaderFixed",value:function(){this.el.classList.add("ac-header--fixed"),this.elWrapperNav&&(this.s.isHeaderMedia?this.elWrapperNav.classList.add("header-unfolded-media"):this.s.isHeaderMonActu?this.elWrapperNav.classList.add("header-unfolded-monactu"):this.elWrapperNav.classList.add("header-unfolded")),this.el.classList.contains("ac-header--folded")?this.elBtnSubscribe&&this.elBtnSubscribe.classList.add("ac-btn--underline"):this.elBtnRegion&&this.elBtnRegion.classList.add("ac-btn--small")}},{key:"resetHeaderFixed",value:function(){this.progressing=!1,this.el.removeAttribute("style"),this.el.classList.remove("ac-header--fixed"),this.elWrapperNav&&(this.s.isHeaderMedia?this.elWrapperNav.classList.remove("header-unfolded-media"):this.s.isHeaderMonActu?this.elWrapperNav.classList.remove("header-unfolded-monactu"):this.elWrapperNav.classList.remove("header-unfolded")),this.el.classList.contains("ac-header--folded")?this.elBtnSubscribe&&this.elBtnSubscribe.classList.remove("ac-btn--underline"):this.elBtnRegion&&this.elBtnRegion.classList.remove("ac-btn--small")}},{key:"showHeaderFixed",value:function(){this.s.isAppWebview}},{key:"hideHeaderFixed",value:function(){this.resetHeaderFixed(),this.hideReadscrollup(!1)}},{key:"initClickHeaderActu",value:function(){this.elHeaderMonActu&&this.elHeaderMonActu.querySelector(".ac-header__monactu-current").addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})}))}},{key:"setScrollModalConnect",value:function(){(this.scrollTop=Math.round(window.pageYOffset||document.documentElement.scrollTop))<this.el.offsetTop&&window.scrollTo({top:this.el.offsetTop})}},{key:"addNoScrollingBody",value:function(){window.innerWidth<i.a.s.breakpoints.medium&&(this.s.isHeaderMedia&&this.elHeaderMedia.classList.add("is-hidden"),document.body.classList.add("no-scrolling"))}},{key:"removeNoScrollingBody",value:function(){this.s.isHeaderMedia&&this.elHeaderMedia.classList.remove("is-hidden"),document.body.classList.remove("no-scrolling")}}])&&S(t.prototype,n),o&&S(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function A(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var C=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.s={duration:450,currentPosX:0,heightOver:1,delayStart:200},this.el=t,this.elOver=this.el.querySelector(".ac-nav__over"),this.elNav=this.el.querySelector(".ac-nav__main"),this.elItems=this.elNav.querySelectorAll("li"),this.elActive=this.elNav.querySelector(".is-active"),this.initNav(),this.elActive&&setTimeout((function(){n.resetPositionOver(0)}),this.s.delayStart)}var t,n,i;return t=e,(n=[{key:"resize",value:function(){this.resetPositionOver(0)}},{key:"initNav",value:function(){var e=this;[].slice.call(this.elItems).forEach((function(t){t.addEventListener("mouseover",(function(n){var i=t.querySelector("a");if(i){var o=i.offsetLeft,s=e.elNav.offsetLeft;e.elOver.style.width=i.clientWidth+"px",e.s.currentPosX=Math.floor(o+s);var r="translate3d("+e.s.currentPosX+"px,-"+e.s.heightOver+"px,0)";e.move(r,e.s.duration)}}))})),this.elNav.addEventListener("mouseout",(function(){e.resetPositionOver(e.s.duration)}))}},{key:"resetPositionOver",value:function(e){var t;if(this.elActive){var n=this.elActive.offsetLeft,i=this.elNav.offsetLeft;t="translate3d("+Math.floor(n+i)+"px,-"+this.s.heightOver+"px,0)",this.elOver.style.width=this.elActive.clientWidth+"px"}else t="translate3d("+this.s.currentPosX+"px,0,0)";this.move(t,e)}},{key:"move",value:function(e,t){this.elOver.style.transitionDuration=t+"ms",this.elOver.style.webkitTransitionDuration=t+"ms",this.elOver.style.mozTransitionDuration=t+"ms",this.elOver.style.transform=e,this.elOver.style.webkitTransform=e,this.elOver.style.mozTransform=e}}])&&A(t.prototype,n),i&&A(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function E(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var T=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.s={margin:32,marginBottom:72,id:void 0},this.elMain=document.getElementById("main"),this.elCol=t,this.elParent=t.parentNode,this.elColContainer=t.querySelector(".container"),this.elBanner=this.elCol.querySelector(".ac-banner-ad-300-600"),this.elHeader=n,this.elHeaderMain=this.elHeader.querySelector(".wrap--main"),this.elBanner&&(this.s.id=this.elBanner.getAttribute("data-sticky"),this.elPage=document.getElementById(this.s.id))}var t,n,i;return t=e,(n=[{key:"resize",value:function(){if(this.elBanner){var e=this.elBanner.classList.contains("ac-banner-ad--bottom"),t=this.elBanner.classList.contains("ac-banner-ad--fixed");e&&this.removeBottomBanner(),t&&this.removeFixedBanner()}}},{key:"update",value:function(e,t){if(this.elBanner&&this.elPage&&this.s.id&&t){var n=this.elHeaderMain.clientHeight,i=this.elPage.offsetTop,o=this.elPage.clientHeight,s=this.elParent.offsetTop+this.elCol.offsetTop,r=this.elColContainer.clientHeight,a=this.elBanner.offsetTop,l=this.elBanner.clientHeight;if(!(r>o+10)){var c=this.elBanner.classList.contains("ac-banner-ad--bottom"),u=this.elBanner.classList.contains("ac-banner-ad--fixed");"bottom"===t&&e>s+a-n-this.s.margin&&!c&&!u?this.addFixedBanner(n):"bottom"===t&&e>i+o-l-this.s.marginBottom&&!c?(this.removeFixedBanner(),this.addBottomBanner(o)):"top"===t&&e<i+o-l-this.s.marginBottom&&!u&&c?(this.addFixedBanner(n),this.removeBottomBanner()):"top"===t&&e<s+r-n-this.s.margin&&u&&this.removeFixedBanner()}}}},{key:"addFixedBanner",value:function(e){this.elBanner.classList.add("ac-banner-ad--fixed"),this.elBanner.style.top=e+this.s.margin+"px"}},{key:"removeFixedBanner",value:function(){this.elBanner.classList.remove("ac-banner-ad--fixed"),this.elBanner.removeAttribute("style")}},{key:"addBottomBanner",value:function(e){this.elBanner.classList.add("ac-banner-ad--bottom"),this.elColContainer.style.height=e+"px"}},{key:"removeBottomBanner",value:function(){this.elBanner.classList.remove("ac-banner-ad--bottom"),this.elColContainer.removeAttribute("style")}}])&&E(t.prototype,n),i&&E(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var B=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.init()}var t,n,i;return t=e,(n=[{key:"init",value:function(){var e=this;this.el.querySelector(".ac-btn--close").addEventListener("click",(function(){e.el.classList.add("is-hidden")}))}}])&&P(t.prototype,n),i&&P(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function x(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var q=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.s={duration:400,easing:"easeOutExpo"},this.EVENT={OPEN:"open"},this.el=t,this.el.getAttribute("aria-controls")?this.elDropDown=document.getElementById(this.el.getAttribute("aria-controls")):this.elDropDown=document.getElementById(this.el.getAttribute("aria-owns")),this.elBtnGeoloc=this.elDropDown.querySelector(".js-btn-geoloc"),this.elInputCity=this.elDropDown.querySelector("input"),this.init(),this.elBtnGeoloc&&this.initBtnGeoloc(),this.elInputCity&&this.initInputCity(),this.elDropDown.addEventListener("keydown",this.onKeydown.bind(this))}var t,n,o;return t=e,(n=[{key:"emit",value:function(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t||{},bubbles:!1,cancelable:!1}))}},{key:"update",value:function(){this.elDropDown.classList.contains("is-hidden")||this.hide()}},{key:"hide",value:function(){if(!this.elDropDown.classList.contains("is-hidden")){if(this.elInputCity&&this.elInputCity===document.activeElement)return;this.el.setAttribute("aria-expanded",!1),this.elDropDown.classList.add("is-hidden"),this.elDropDown.removeAttribute("style"),this.elDropDown.removeAttribute("tabIndex"),this.el.classList.contains("ac-icon--arrow-top")&&(this.el.classList.add("ac-icon--arrow-bottom"),this.el.classList.remove("ac-icon--arrow-top"))}}},{key:"init",value:function(){var e=this;this.el.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.elDropDown.classList.contains("is-hidden")?(e.emit(e.EVENT.OPEN,e),e.show(),e.el.classList.contains("ac-icon--arrow-bottom")&&(e.el.classList.remove("ac-icon--arrow-bottom"),e.el.classList.add("ac-icon--arrow-top"))):(e.hide(),e.el.classList.contains("ac-icon--arrow-top")&&(e.el.classList.add("ac-icon--arrow-bottom"),e.el.classList.remove("ac-icon--arrow-top")))})),this.el.addEventListener("keydown",(function(t){9===t.keyCode&&(e.elDropDown.setAttribute("tabIndex",-1),e.elDropDown.focus())}))}},{key:"show",value:function(){var e=window.innerWidth;if(this.elDropDown.classList.remove("is-hidden"),this.el.setAttribute("aria-expanded",!0),e>i.a.s.breakpoints.small){this.elDropDown.style.top=this.el.offsetTop+this.el.clientHeight+"px";var t=this.el.offsetParent.offsetLeft+this.el.offsetLeft+this.el.clientWidth-this.elDropDown.clientWidth;this.elDropDown.style.left=t+"px"}}},{key:"initBtnGeoloc",value:function(){this.elBtnGeoloc.addEventListener("click",(function(e){e.stopPropagation(),console.log(navigator.geolocation),navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){console.log(e.coords.longitude,e.coords.latitude)}),(function(){}),{enableHighAccuracy:!0,timeout:6e3,maximumAge:5e4})}))}},{key:"initInputCity",value:function(){this.elInputCity.addEventListener("click",(function(e){e.stopPropagation()}))}},{key:"onKeydown",value:function(e){if(9===e.keyCode){var t=this.elDropDown.querySelectorAll("a").length;this.elInputCity?e.target===this.elInputCity&&(this.el.focus(),this.hide()):e.target===this.elDropDown.querySelectorAll("a")[t-1]&&(this.el.focus(),this.hide())}}}])&&x(t.prototype,n),o&&x(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function O(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var R=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.elBtn=this.el.querySelector("button"),this.elTxt=this.el.querySelector("p"),this.init()}var t,n,i;return t=e,(n=[{key:"init",value:function(){var e=this;this.el.addEventListener("click",(function(t){e.elTxt.classList.contains("is-hidden")?(e.elTxt.classList.remove("is-hidden"),e.elBtn.classList.remove("ac-icon--arrow-bottom"),e.elBtn.classList.add("ac-icon--arrow-top"),e.elBtn.setAttribute("aria-expanded",!0)):(e.elTxt.classList.add("is-hidden"),e.elBtn.classList.add("ac-icon--arrow-bottom"),e.elBtn.classList.remove("ac-icon--arrow-top"),e.elBtn.setAttribute("aria-expanded",!1))}))}}])&&O(t.prototype,n),i&&O(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),M=n(21),D=n.n(M);function N(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var H=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.init()}var t,n,i;return t=e,(n=[{key:"init",value:function(){var e=this;this.el.querySelector(".btn-close-cookies").addEventListener("click",(function(){e.el.classList.add("is-hidden"),localStorage.setItem("bandeau","fermeture")})),this.el.querySelector(".cookies-accepted").addEventListener("click",(function(){e.el.classList.add("is-hidden")}));var t=localStorage.getItem("bandeau");"fermeture"===t&&!1===this.el.classList.contains("is-hidden")&&this.el.classList.add("is-hidden"),window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((function(e){!0===e.getUserConsentStatusForPurpose("cookies")?document.querySelector(".ac-banner-cookies").classList.add("is-hidden"):!1===e.getUserConsentStatusForPurpose("cookies")&&"fermeture"!==t?document.querySelector(".ac-banner-cookies").classList.remove("is-hidden"):document.querySelector(".ac-banner-cookies").classList.add("is-hidden")})),function(e){function n(n){e.didomiEventListeners=e.didomiEventListeners||[],e.didomiEventListeners.push({event:"consent.changed",listener:function(e){void 0!==e.action&&(n(),!1===Didomi.getUserConsentStatusForPurpose("cookies")&&"fermeture"!==t&&document.querySelector(".ac-banner-cookies").classList.remove("is-hidden"),!1===Didomi.getUserConsentStatusForVendor("c:publihebdo-GHnQmDkF")&&(D.a.setCookie("mics_vid",void 0,-1),D.a.setCookie("mics_lts",void 0,-1),D.a.setCookie("Chk",void 0,-1)))}})}function i(){n((function(){e.location.href=e.location.href}))}document.cookie.indexOf("euconsent-v2")>-1?i():n(i)}(window)}}])&&N(t.prototype,n),i&&N(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var F=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.s={marginTop:12},this.el=t,this.elTooltip=document.getElementById(this.el.getAttribute("data-tooltip")),this.ttl=2592e3,this.maTooltip=JSON.parse(localStorage.getItem("ma-tooltip")||"{}"),this.currentTimestamp=Date.now(),this.maTooltip.closedTtl=this.maTooltip.closedTtl||0,this.elTooltip&&this.maTooltip.closedTtl>this.currentTimestamp||n?this.elTooltip.remove():this.elTooltip&&(this.elTooltip.style.visibility="visible",this.init())}var t,n,i;return t=e,(n=[{key:"init",value:function(){var e=this;this.elTooltip.querySelector("button").addEventListener("click",(function(){e.elTooltip.remove(),e.elTooltip=null,localStorage.setItem("ma-tooltip",JSON.stringify({closedTtl:e.currentTimestamp+e.ttl}))}))}},{key:"resize",value:function(){if(this.elTooltip){var e=0,t=this.el.offsetLeft+this.el.clientWidth/2-this.elTooltip.clientWidth/2;e=this.elTooltip.classList.contains("is-arrow-bottom")?-this.el.offsetTop-this.elTooltip.clientHeight:this.el.offsetTop+this.el.clientHeight+this.s.marginTop,this.elTooltip.style.top=e+"px",this.elTooltip.style.left=t+"px"}}}])&&_(t.prototype,n),i&&_(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function j(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}window.requestIdleCallback=window.requestIdleCallback||function(e){var t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)},window.cancelIdleCallback=window.cancelIdleCallback||function(e){clearTimeout(e)};var I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.EVENT={UPDATE:"update",SNAV_READY:"snav-ready",USER_STATE:"moncompte:user-state"},this.storageTokenKey="iamToken",this.storageOAuth2StateKey="oauth2state",this.keycloakConfig=window.actu.moncompte.auth,this.apiMoncompte=window.actu.moncompte.api,this.apiActuPost=window.actu.disPost.endpoint,this.token=!1,this.authed=!1,this.localStorageTTL=3e5,this.userData={},this.sNavData=JSON.parse(localStorage.getItem("ma-snav"))||[],this.elBtnMonCompte=document.querySelector(".js-btn-logged"),this.elBtnConnect=document.querySelector(".js-btn-connect"),this.elBtnMonactu=document.querySelector(".js-btn-news"),this.elActuNavMonActu=document.querySelector(".ac-nav-actu li:nth-child(2)"),this.elSnavWrapper=document.querySelector(".ac-caroussel-snav-actu .js-items"),this.elBtnMonCompte&&(window.addEventListener("message",this.messageSso.bind(this)),this.init())}var t,n,i;return t=e,(n=[{key:"isAuthed",value:function(){return this.authed}},{key:"init",value:function(){this.token=JSON.parse(!!localStorage.getItem(this.storageTokenKey)&&localStorage.getItem(this.storageTokenKey)),this.token?(this.authed=!0,this.initCalls()):this.auth()}},{key:"auth",value:function(){new Date,localStorage.setItem(this.storageOAuth2StateKey,this.uuid());var e=document.createElement("iframe");e.setAttribute("style","width: 0; height: 0; border: none; opacity: 0; position: absolute; left: -9999px;"),e.setAttribute("src",this.createSsoIframeUrl()),document.body.appendChild(e)}},{key:"createSsoIframeUrl",value:function(){return this.keycloakConfig.url+"/realms/"+this.keycloakConfig.realm+"/protocol/openid-connect/auth?client_id="+encodeURIComponent(this.keycloakConfig.clientId)+"&redirect_uri="+encodeURIComponent(this.keycloakConfig.redirectUri)+"&state="+encodeURIComponent(localStorage.getItem(this.storageOAuth2StateKey))+"&response_mode=fragment&response_type="+encodeURIComponent("code")+"&scope="+encodeURIComponent("openid")+"&prompt=none"}},{key:"messageSso",value:function(e){var t=this;if(e.data.type&&"sso_status"===e.data.type){var n=e.data;if(console.log("messageSso data type sso_status",n),"not_logged"==n.name)return localStorage.removeItem(this.storageOAuth2StateKey),void this.showLogin();n.state&&n.state===localStorage.getItem(this.storageOAuth2StateKey)?n.code?this.getAccessToken(n.code).then((function(){t.initCalls()})).catch((function(){t.showLogin()})).finally((function(){localStorage.removeItem(t.storageOAuth2StateKey)})):localStorage.removeItem(this.storageOAuth2StateKey):(console.log("Invalid state, make sure HTTP sessions are enabled."),this.showLogin())}}},{key:"getAccessToken",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=new XMLHttpRequest;n.open("POST",this.keycloakConfig.url+"/realms/"+this.keycloakConfig.realm+"/protocol/openid-connect/token",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded");var i="code="+t+"&grant_type=authorization_code&client_id="+this.keycloakConfig.clientId+"&redirect_uri="+encodeURIComponent(this.keycloakConfig.redirectUri);return new Promise((function(t,o){n.onload=function(){return 200==n.status?(e.setToken(n.responseText),t()):o()},n.onerror=function(){return o()},n.send(i)}))}},{key:"getRefreshToken",value:function(){var e=this,t=new XMLHttpRequest;t.open("POST",this.keycloakConfig.url+"/realms/"+this.keycloakConfig.realm+"/protocol/openid-connect/token",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded");var n="grant_type=refresh_token&client_id="+this.keycloakConfig.clientId+"&refresh_token="+this.token.refresh_token+"&redirect_uri="+encodeURIComponent(this.keycloakConfig.redirectUri);return new Promise((function(i,o){t.onload=function(){return 200==t.status?(e.setToken(t.responseText),i()):(e.showLogin(),o(t.response))},t.onerror=function(){return o(t.response)},t.send(n)}))}},{key:"setToken",value:function(e){this.authed=!0,new Date,this.token=JSON.parse(e),localStorage.setItem(this.storageTokenKey,e)}},{key:"deleteAuthData",value:function(){this.token=!1,this.authed=!1,localStorage.removeItem(this.storageTokenKey)}},{key:"uuid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},{key:"emit",value:function(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t||{},bubbles:!1,cancelable:!1}))}},{key:"createXhrMoncompte",value:function(e,t){var n=new XMLHttpRequest;return n.open(t||"GET",this.apiMoncompte+e),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Authorization","Bearer "+this.token.access_token),n}},{key:"createXhrActu",value:function(e){var t=new XMLHttpRequest;return t.open("GET",this.apiActuPost+e),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("Authorization","Bearer "+this.token.access_token),t}},{key:"initCalls",value:function(){var e=this;this.initUser().then((function(t){e.showLogged(),e.initInArticleFollow()})).catch((function(t){e.showLogin()}))}},{key:"initUser",value:function(){var e=this;return new Promise((function(t,n){var i=e.createXhrMoncompte("/user");i.onload=function(){if(401!=i.status)return e.userData=JSON.parse(i.response),t(!0);e.getRefreshToken().then((function(n){return t(e.initUser())})).catch((function(t){return e.deleteAuthData(),e.auth(),n()}))},i.onerror=function(e){n()},i.send()}))}},{key:"initInArticleFollow",value:function(){var e=this,t=document.querySelector(".ac-article-follow");if(t){var n=t.querySelector(".ac-btn"),i=t.querySelector(".ac-article-follow__link");if(!this.authed)return this.showBtnFollow(i,n),n.setAttribute("disabled",!0),i.setAttribute("href",window.actu.moncompte.signin),i.innerText="Mon actu",i.classList.remove("is-hidden"),void t.classList.remove("is-hidden");var o=window.actu.context;o.marque&&(n.setAttribute("data-type","marque"),n.setAttribute("data-typeid",o.id),i.setAttribute("href","/mon-actu/#marque_"+o.marque));var s="",r=!0;this.sNavData.forEach((function(e){o.hasOwnProperty("marque")&&"marque"===e.type&&r&&(r=!(e.typeId==o.id))})),r?(this.showBtnFollow(i,n),s="/mon-actu/subscribe"):(this.showBtnFollowed(i,n),s="/mon-actu/unsubscribe"),n.addEventListener("click",(function(t){t.preventDefault();var o=e.createXhrMoncompte(s,"POST"),a={type:t.target.dataset.type,typeId:t.target.dataset.typeid};o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE)if(401==JSON.parse(o.response).code)e.getRefreshToken().then((function(t){e.initInArticleFollow()})).catch((function(){e.deleteAuthData(),e.auth()}));else{var t=JSON.parse(o.responseText);if(200===o.status)r?(e.showBtnFollowed(i,n),s="/mon-actu/unsubscribe",r=!1):(e.showBtnFollow(i,n),s="/mon-actu/subscribe",r=!0);else if(403===o.status){var a=document.createElement("div");a.classList.add("ac-article-follow__message"),a.innerText=t.message,n.parentNode.parentNode.appendChild(a)}}},o.send(JSON.stringify(a))})),t.classList.remove("is-hidden")}}},{key:"showBtnFollowed",value:function(e,t){e.classList.remove("is-hidden"),t.innerHTML=t.getAttribute("data-unfollow"),t.setAttribute("data-trkFavoriAction","Retirer"),t.classList.add("ac-btn--border-blue","ac-icon--star"),t.classList.remove("ac-btn--blue","ac-icon--star-empty","is-hidden")}},{key:"showBtnFollow",value:function(e,t){e.classList.add("is-hidden"),t.classList.add("ac-icon--star-empty"),t.classList.remove("ac-icon--star"),t.innerHTML=t.getAttribute("data-follow"),t.classList.remove("is-hidden"),t.setAttribute("data-trkFavoriAction","Suivre")}},{key:"showLogin",value:function(){var e=this;window.requestAnimationFrame((function(){e.elBtnMonCompte.setAttribute("hidden",!0),e.elBtnConnect.removeAttribute("hidden"),e.elBtnMonactu.removeAttribute("hidden"),e.elSnavWrapper&&(document.createElement("li").innerHTML="Vous devez être connecté",e.elBtnConnect.dispatchEvent(new Event("click"))),e.initInArticleFollow()})),this.emit(this.EVENT.USER_STATE,{type:"moncompte",logged:!1})}},{key:"showLogged",value:function(){var e=this;window.requestAnimationFrame((function(){e.elBtnConnect.setAttribute("hidden",!0),e.elBtnMonCompte.removeAttribute("hidden"),""!==e.userData.prenom&&(e.elBtnMonCompte.children[0].innerText=e.userData.prenom),e.elBtnMonactu.setAttribute("href","/mon-actu"),e.elBtnMonactu.setAttribute("data-trkNavHeader","mon actu connecté"),e.elBtnMonactu.removeAttribute("hidden"),e.elActuNavMonActu.children[0].setAttribute("href","/mon-actu")})),this.emit(this.EVENT.USER_STATE,{type:"moncompte",logged:!0,uuid:this.userData.uuid})}}])&&j(t.prototype,n),i&&j(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function U(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var W=function(){function e(t,n){var i=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=window.actu.context,this.context){this.elLastNews=t,this.elReadScrollUp=n,this.endpoint=window.actu.disPost.endpoint,this.fragLastNews=document.createDocumentFragment(),this.fragReadScrollup=document.createDocumentFragment();var o=this.endpoint;this.context.marque?o+="marque_"+this.context.marque:this.context.region?o+="region_"+this.context.region:this.context.departement?o+="departement_"+this.context.departement:this.context.commune?o+="commune_"+this.context.commune:this.context.category?o+="category_"+this.context.category:this.context.typearticle&&(o+="typearticle_"+this.context.typearticle),o+="/qtt_6";var s=new XMLHttpRequest;s.open("GET",o,!0),s.setRequestHeader("Content-Type","application/json"),s.onload=function(){if(200===s.status){var e=JSON.parse(s.response);for(var t in e.data)i.elLastNews&&i.elLastNews.offsetWidth>0&&i.fillLastNews(e.data[t]),i.elReadScrollUp&&t<=3&&i.fillReadScrollUp(e.data[t]);i.flush()}},s.send()}}var t,n,i;return t=e,(n=[{key:"fillLastNews",value:function(e){var t=document.createElement("span");t.innerHTML=e.display_date;var n=document.createElement("a");n.href=e.permalink,n.innerHTML=e.post_title,n.appendChild(t);var i=document.createElement("li");i.classList.add("ac-push-last-news__article"),i.appendChild(n),this.fragLastNews.appendChild(i)}},{key:"fillReadScrollUp",value:function(e){var t=document.createElement("p");t.innerHTML=e.post_title;var n=document.createElement("img");n.src=e.photos.sizes["home-xs"][0],n.alt=e.photos.caption,n.loading="lazy";var i=document.createElement("a");i.href=e.permalink,i.appendChild(n),i.appendChild(t);var o=document.createElement("li");o.classList.add("ac-read-scrollup__article"),o.appendChild(i),this.fragReadScrollup.appendChild(o)}},{key:"flush",value:function(){this.elLastNews&&(this.elLastNews.innerHTML="",this.elLastNews.appendChild(this.fragLastNews)),this.elReadScrollUp&&this.elReadScrollUp.appendChild(this.fragReadScrollup)}}])&&U(t.prototype,n),i&&U(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function z(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var V=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.elForm=this.el.querySelector("form"),this.elField=this.elForm.querySelector(".ac-search-autocomplete__field"),this.elInputSearch=this.elForm.querySelector(".ac-search-autocomplete__field input"),this.elSearchResults=this.elForm.querySelector(".ac-search-autocomplete__results"),this.elSearchResultsList=this.elSearchResults.querySelector("ul"),this.elBtnGeoloc=this.elField.querySelector(".js-btn-geoloc"),this.elInputSearch,this.indexFocus=-1,this.typeSearch=n,this.geoData=!1,this.timer=null,this.xhr=!1,this.elBtnGeoloc&&this.initBtnGeoloc()}var t,n,i;return t=e,(n=[{key:"hide",value:function(){this.elSearchResults.classList.contains("is-hidden")||this.elSearchResults.classList.add("is-hidden")}},{key:"initResults",value:function(){var e=this;[].slice.call(this.elSearchResults.querySelectorAll("button")).forEach((function(t){t.addEventListener("click",e.onClickBtnResult.bind(e))})),this.indexFocus=-1}},{key:"updateFocusBottom",value:function(e){this.indexFocus<e-1?this.indexFocus++:this.indexFocus=0,this.elSearchResults.querySelectorAll("button")[this.indexFocus].focus()}},{key:"updateFocusTop",value:function(e){0==this.indexFocus?this.indexFocus=e-1:this.indexFocus--,this.elSearchResults.querySelectorAll("button")[this.indexFocus].focus()}},{key:"initBtnGeoloc",value:function(){var e=this;this.elField.addEventListener("click",(function(t){console.log(navigator.geolocation),t.stopPropagation(),navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){console.log(t.coords.longitude,t.coords.latitude),e.callPostGeo(t.coords.longitude,t.coords.latitude),e.elSearchResults.classList.remove("is-hidden")}),(function(){}),{enableHighAccuracy:!0,timeout:6e3,maximumAge:5e4})}))}},{key:"onFocus",value:function(e){console.debug("onFocus"),this.xhr||this.geoData||(console.debug("!this.xhr && !this.geoData"),this.callApi())}},{key:"onKeydown",value:function(e){var t=this;this.elSearchResults.classList.contains("is-hidden")&&this.elInputSearch.value.length>1?(this.elSearchResults.classList.remove("is-hidden"),this.elInputSearch.setAttribute("aria-expanded",!0)):this.elInputSearch.value.length||(this.elSearchResults.classList.add("is-hidden"),this.elInputSearch.setAttribute("aria-expanded",!1));var n=this.elSearchResults.querySelectorAll("button").length;switch(e.keyCode){case 13:this.elInputSearch.value=this.elSearchResults.querySelectorAll("button")[0].innerHTML,this.elSearchResults.classList.add("is-hidden");break;case 40:e.preventDefault(),e.stopPropagation(),this.updateFocusBottom(n);break;case 38:e.preventDefault(),e.stopPropagation(),this.updateFocusTop(n);break;default:this.geoData&&this.elInputSearch.value.length>=2?(this.clearTimer(),this.timer=setTimeout((function(){t.searchCity(t.elInputSearch.value),t.initResults()}),2e3)):this.elInputSearch.value.length<2&&this.hide()}}},{key:"callPostGeo",value:function(e,t){var n=this,i=new XMLHttpRequest;i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&(n.fillCities(i.response.data),n.initResults())},i.open("GET",window.actu.disPost.endpoint+"geocover_"+e+"_"+t+"/qtt_10",!0),i.responseType="json",i.send()}},{key:"callApi",value:function(){var e=this;this.xhr=new XMLHttpRequest,this.xhr.onreadystatechange=function(){e.xhr.readyState===XMLHttpRequest.DONE&&(e.geoData=e.xhr.response,e.searchCity(e.elInputSearch.value),e.initResults())},this.xhr.open("GET",window.location.protocol+"//static."+window.location.hostname+"/geojson/autocomplete-geocity.json",!0),this.xhr.responseType="json",this.xhr.send()}},{key:"clearTimer",value:function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"onClickBtnResult",value:function(e){e.preventDefault(),this.elInputSearch.value=e.target.innerHTML,this.indexFocus=-1,this.elSearchResults.classList.add("is-hidden"),window.location.href=e.target.dataset.url}},{key:"fillCities",value:function(e){var t=document.createDocumentFragment();e.forEach((function(e){var n=document.createElement("li"),i=document.createElement("button");i.setAttribute("role","option"),i.setAttribute("data-url",e[1]),i.innerText=e[0],n.appendChild(i),t.appendChild(n)})),this.elSearchResultsList.innerHTML="",this.elSearchResultsList.appendChild(t)}},{key:"searchCity",value:function(e){var t=new RegExp("^"+e,"i"),n=document.createDocumentFragment();for(var i in this.geoData)if(-1!==i.search(t)){var o=document.createElement("li"),s=document.createElement("button");s.setAttribute("role","option"),s.setAttribute("data-url",this.geoData[i]),s.innerText=i,o.appendChild(s),n.appendChild(o)}this.elSearchResultsList.innerHTML="",this.elSearchResultsList.appendChild(n)}}])&&z(t.prototype,n),i&&z(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),X=n(29);function K(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var G=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.elForm=this.el.querySelector("form"),this.elAllBtnsFollows=this.el.querySelectorAll(".ac-preview-media-small"),this.initForm(),this.elAllBtnsFollows.length&&this.initBtnsFollow()}var t,n,i;return t=e,(n=[{key:"initForm",value:function(){this.elForm.addEventListener("submit",(function(e){}))}},{key:"initBtnsFollow",value:function(){new X.a(this.el)}}])&&K(t.prototype,n),i&&K(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function J(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Y=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scrolling=!1,this.scrollTop=Math.round(window.pageYOffset||document.documentElement.scrollTop),this.elWrapper=document.getElementById("wrapper-global"),this.elHeader=this.elWrapper.querySelector(".ac-header"),this.elNav=this.elWrapper.querySelector(".ac-nav"),this.elAllBannersAdCol2=this.elWrapper.querySelectorAll(".col-2"),this.elPageUser=document.querySelector(".ac-user"),this.elPageOther=document.querySelector(".ac-page-other"),this.elPageList=document.querySelector(".ac-page-list"),this.elPageAccount=this.elWrapper.querySelector(".ac-account"),this.elPageArticle=this.elWrapper.querySelector(".js-article-inner"),this.elPageNewsletter=this.elWrapper.querySelector(".ac-newsletter"),this.elPageMonactu=this.elWrapper.querySelector(".ac-page-monactu"),this.elModalRegister=document.getElementById("modal-register"),this.elAlertInfo=this.elWrapper.querySelector(".ac-alert-info"),this.elBannerSponso=this.elWrapper.querySelector(".ac-banner-sponsor"),this.elSearchAdvancedAll=this.elWrapper.querySelector(".ac-search-advanced-all"),this.elSearchResults=this.elWrapper.querySelector(".ac-search-results"),this.elSearchAdvancedLocale=this.elWrapper.querySelector(".ac-search-advanced-locale"),this.elWeather=this.elWrapper.querySelector(".ac-weather-main"),this.elBannerCookies=document.querySelector(".ac-banner-cookies"),this.elAllSearchCity=document.querySelectorAll(".js-search-autocomplete-city"),this.elAllCaroussels=document.querySelectorAll(".js-caroussel"),this.elPushLastNews=this.elWrapper.querySelector(".ac-push-last-news > ul"),this.elReadScrollup=this.elWrapper.querySelector(".ac-read-scrollup__list > ul"),this.header=null,this.nav=null,this.bannerAd=null,this.searchAdvanced=null,this.monCompte=null,this.allDropDown=[],this.allCaroussels=[],this.allBannersAd=[],this.allSearchCity=[],this.allTooltips=[],this.detectSupportPassive(),this.initMonCompte(),this.initComponents(),this.initPages(),this.initPartials(),this.initModals(),this.initClickBody(),this.onResize(),window.addEventListener("scroll",this.onScroll.bind(this)),window.addEventListener("resize",this.onResize.bind(this)),(this.elPushLastNews||this.elReadScrollup)&&window.addEventListener("load",(function(){new W(t.elPushLastNews,t.elReadScrollup)})),this.moveAdNodesPub()}var t,o,s;return t=e,(o=[{key:"update",value:function(){if(this.scrolling){var e=Math.round(window.pageYOffset||document.documentElement.scrollTop),t=null,n=window.innerWidth;e>this.scrollTop?t="bottom":e<this.scrollTop&&(t="top"),this.header&&this.header.update(e,t),this.allBannersAd.length&&this.allBannersAd.forEach((function(o){n>=i.a.s.breakpoints.large&&o.update(e,t)})),this.allDropDown.length&&Math.abs(this.scrollTop-e)>10&&this.allDropDown.forEach((function(e){e.update()})),this.scrollTop=e,this.scrolling=!1}}},{key:"initMonCompte",value:function(){var e=this;this.monCompte=new I,document.addEventListener(this.monCompte.EVENT.USER_STATE,(function(t){e.initTooltips(t.logged)}))}},{key:"initPartials",value:function(){var e=this;this.elHeader&&(this.header=new L(this.elHeader)),this.elNav&&(this.nav=new C(this.elNav)),this.elAllBannersAdCol2&&[].slice.call(this.elAllBannersAdCol2).forEach((function(t){var n=new T(t,e.elHeader);e.allBannersAd.push(n)}))}},{key:"initPages",value:function(){var e=this;this.elPageArticle&&(console.log("ACTU this.elPageArticle : ",this.elPageArticle),n.e(5).then(n.bind(null,61)).then((function(t){var n=t.default;console.log("ACTU PagesArticle"),new n(e.elPageArticle)}))),this.elPageAccount&&(console.log("ACTU this.elPageArticle : ",this.elPageArticle),n.e(6).then(n.bind(null,59)).then((function(t){var n=t.default;console.log("ACTU PagesAccount"),new n(e.elPageAccount)}))),this.elPageUser&&(console.log("ACTU this.elPageUser : ",this.elPageArticle),n.e(13).then(n.bind(null,60)).then((function(t){var n=t.default;console.log("ACTU PagesUser"),new n(e.elPageUser)}))),this.elPageOther&&(console.log("ACTU this.elPageOther : ",this.elPageOther),Promise.all([n.e(0),n.e(12)]).then(n.bind(null,62)).then((function(t){var n=t.default;console.log("ACTU PagesOther"),new n(e.elPageOther)}))),this.elPageList&&(console.log("ACTU this.elPageList : ",this.elPageList),Promise.all([n.e(0),n.e(9)]).then(n.bind(null,54)).then((function(t){var n=t.default;console.log("ACTU PagesList"),new n(e.elPageList)}))),this.elPageNewsletter&&(console.log("ACTU this.elPageNewsletter : ",this.elPageNewsletter),n.e(11).then(n.bind(null,55)).then((function(t){var n=t.default;console.log("ACTU PagesNewsletter");var i=new n(e.elPageNewsletter,e.monCompte);document.addEventListener(e.monCompte.EVENT.USER_STATE,(function(e){i.initBtns(e.detail)}))}))),this.elPageMonactu&&document.addEventListener(this.monCompte.EVENT.USER_STATE,(function(t){Promise.all([n.e(0),n.e(10)]).then(n.bind(null,56)).then((function(t){var n=t.default;console.log("ACTU PagesMonActu"),new n(e.monCompte.token.access_token),window.requestAnimationFrame((function(){e.allCaroussels.forEach((function(e){e.el.classList.contains("ac-caroussel-snav-actu")&&(e.initItems(),e.resize())}))}))}))}))}},{key:"initModals",value:function(){this.elModalRegister&&new ModalUser(this.elModalRegister)}},{key:"initComponents",value:function(){var e=this;this.elAlertInfo&&new B(this.elAlertInfo),this.elSearchAdvancedAll&&(this.searchAdvanced=new SearchAdvancedAll(this.elSearchAdvancedAll,this.elSearchResults)),this.elSearchAdvancedLocale&&new G(this.elSearchAdvancedLocale),this.elBannerSponso&&new R(this.elBannerSponso),this.elBannerCookies&&new H(this.elBannerCookies),this.elWeather&&n.e(8).then(n.bind(null,57)).then((function(t){var n=new(0,t.default)(e.elWrapper);document.addEventListener(n.EVENT.UPDATE,(function(){e.allCaroussels.length&&e.allCaroussels.forEach((function(e){e.initItems(),e.resize()}))}))})),this.elPushFollowCity&&[].slice.call(this.elPushFollowCity).forEach((function(e){new PushFollowCity(e)})),[].slice.call(document.body.querySelectorAll("[data-dropdown]")).forEach((function(t){var n=new q(t);e.allDropDown.push(n),document.addEventListener(n.EVENT.OPEN,(function(t){e.allDropDown.forEach((function(e){t.detail!==e&&e.hide()}))}))}));var t=[].slice.call(this.elAllCaroussels);t.length&&Promise.all([n.e(0),n.e(7)]).then(n.bind(null,58)).then((function(n){var i=n.default;t.forEach((function(t){var n=new i(t);n.initItems(),n.resize(),e.allCaroussels.push(n)}))})),[].slice.call(this.elAllSearchCity).forEach((function(t){var n=new V(t,"city");e.allSearchCity.push(n)}))}},{key:"initTooltips",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[].slice.call(document.body.querySelectorAll("[data-tooltip]"));t.forEach((function(t){new F(t,e)}))}},{key:"initClickBody",value:function(){var e=this;document.body.addEventListener("click",(function(){e.allDropDown.length&&e.allDropDown.forEach((function(e){e.hide()})),e.elAllSearchCity.length&&e.allSearchCity.forEach((function(e){e.hide()})),e.searchAdvanced&&e.searchAdvanced.hide()}))}},{key:"detectSupportPassive",value:function(){try{var e=Object.defineProperty({},"passive",{get:function(){i.a.s.supportsPassive=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(e){}}},{key:"onResize",value:function(){this.allDropDown.length&&this.allDropDown.forEach((function(e){e.hide()})),this.allCaroussels.length&&this.allCaroussels.forEach((function(e){e.resize()})),this.nav&&this.nav.resize(),this.allBannersAd.length&&this.allBannersAd.forEach((function(e){e.resize()}))}},{key:"onScroll",value:function(){this.scrolling=!0}},{key:"moveAdNodesPub",value:function(){var e=document.querySelector(".ac-article-content");if(e)if("desktop"===window.deviceType&&/(Article|Affiliation)/g.test(actu.typePage)){console.debug("ACTU : moveAdNodes running");var t=e.querySelector(".ac-banner-ad-300-250");t&&document.querySelector(".col-2 > div").insertAdjacentElement("afterbegin",t);var n=e.querySelectorAll(".inread");if(n){var i={0:n.item(0),3:n.item(1)},o=[];for(var s in e.querySelectorAll(":scope > p").forEach((function(e){e.hasAttribute("class")||o.push(e)})),i)null!==i[s]&&o[s].insertAdjacentElement("afterend",i[s])}}else console.debug("ACTU : moveAdNodes return")}}])&&J(t.prototype,o),s&&J(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();document.addEventListener("DOMContentLoaded",(function(){var e=document.createElement("input");if(e.setAttribute("type","date"),"date"!==e.type){var t=document.createElement("script");t.src="dist/libs/date-input-polyfill.dist.js",t.async=!0,t.defer=!0,document.body.appendChild(t)}var n=new Y;!function e(){n.update(),window.requestAnimationFrame(e)}()}))},37:function(e,t,n){n(34),e.exports=n(38)},38:function(e,t,n){}});