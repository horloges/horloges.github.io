var adomikTests={};var adomikGAConfig={};var adomikPbjsVariable=window.pbjs||{},adomikPbjs={initADK:e=>{if(adomikPbjs.preventTest())return;let t=e.adUnits||adomikPbjsVariable.adUnits||[];e.adUnits=t;let s=adomikPbjs.alreadyDefinedTest();if(null==s)adomikPbjs.selectTest(e);else{let t=s.testId,o=s.testOptionLabel;Object.keys(adomikTests).includes(t)?adomikPbjs.testInScope(t)?adomikPbjs.launchTest(e,t,o):sessionStorage.removeItem(window.location.hostname+"_AdomikTestInScope"):(adomikPbjs.localRecord("_AdomikTest",null),adomikPbjs.selectTest(e))}},selectTest:e=>{let t=Object.keys(adomikTests).filter(e=>adomikPbjs.testInScope(e)),s=(()=>{if(t.length>0)return Math.floor(Math.random()*t.length)})();if(null==s)return void sessionStorage.removeItem(window.location.hostname+"_AdomikTestInScope");let o=t[s];adomikTests[o].ratio<=Math.random()?adomikPbjs.localRecord("_NoAdomikTest",!0):adomikPbjs.launchTest(e,o)},launchTest:(e,t,s=null)=>{let o=adomikTests[t],i=adomikPbjs.selectTestValue(o,s);switch(o.type){case"bidder":adomikPbjs.biddersTest(i.value,e);break;case"timeout":adomikPbjs.timeoutTest(i.value,e);break;case"s2s":adomikPbjs.s2sTest(i.value)}adomikPbjs.recordTestSettings(t,i.label)},selectTestValue:(e,t)=>{let s=e.options;return null==t?s[0|Math.floor(s.length*Math.random())]:s.find(e=>e.label==t)},biddersTest:(e,t)=>{t.adUnits.forEach(t=>{t.bids=t.bids.filter(t=>!e.includes(t.bidder))})},timeoutTest:(e,t)=>{t.timeout=e,adomikPbjsVariable.setConfig({s2sConfig:{timeout:e}})},s2sTest:e=>{adomikPbjsVariable.setConfig({s2sConfig:{bidders:e}})},recordTestSettings:(e,t)=>{if(void 0!==window.ga){let s;window.ga(function(e){s=e.get("trackingId")}),null==s&&(s=window.ga.getAll()[0].get("trackingId"));let o=adomikGAConfig[s];null!=o&&(window.ga("create",s,"auto"),window.ga("set",o.test_id.replace("ga:",""),e),window.ga("set",o.test_value.replace("ga:",""),t),window.ga("send","event",{nonInteraction:!0}))}adomikPbjs.localRecord("_AdomikTest",JSON.stringify({testId:e,testOptionLabel:t})),adomikPbjs.localRecord("_AdomikTestInScope",!0),void 0!==window.googletag&&window.googletag.pubads().setTargeting("adk_kv",`testId:${e}/testValue:${t}`)},preventTest:()=>sessionStorage.getItem(window.location.hostname+"_NoAdomikTest"),alreadyDefinedTest:()=>JSON.parse(sessionStorage.getItem(window.location.hostname+"_AdomikTest")),testInScope:e=>{let t=adomikTests[e].filters;return null==t||(null==t.hostname||t.hostname.includes(window.location.hostname))},localRecord:(e,t)=>{sessionStorage.setItem(window.location.hostname+e,t)}};adomikPbjsVariable.que=adomikPbjsVariable.que||[],adomikPbjsVariable.que.push(function(){adomikPbjsVariable.adomikRequestBids=adomikPbjsVariable.requestBids,adomikPbjsVariable.requestBids=function(e){let t=e||{};try{adomikPbjs.initADK(t)}catch(e){console.log(e)}adomikPbjsVariable.adomikRequestBids(t)}});
